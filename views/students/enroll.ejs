<%- include('../partials/header') %>

<h2>Enroll Student</h2>

<% if (error) { %>
    <div class="alert error"><%= error %></div>
<% } %>

<div class="card detail-card">
    <h3><%= student.First_Name %> <%= student.Last_Name %></h3>
    <p>Select a course to assign to this student.</p>
</div>

<form action="/students/<%= student.ID %>/enroll" method="POST" class="form-card" style="margin-top: 20px;">

    <div class="form-group">
        <label>Select Course:</label>
        <select name="course_id" required style="width: 100%; padding: 8px;">
            <option value="" disabled selected>-- Choose a Course --</option>
            <% if (locals.courses) { %>
                <% courses.forEach(course => { %>
                    <option value="<%= course.ID %>">
                        <%= course.Name %> (<%= course.Credits %> credits)
                    </option>
                <% }) %>
            <% } %>
        </select>
    </div>

    <div class="form-group">
        <label>Grade (Optional):</label>
        <input type="number" name="grade" step="0.5" min="2" max="5" placeholder="e.g. 4.5">
    </div>

    <div class="form-group">
        <label>Enrollment Date:</label>
        <input type="date" name="enrollment_date" value="<%= new Date().toISOString().split('T')[0] %>">
    </div>

    <div class="actions">
        <button type="submit" class="btn">Enroll</button>
        <a href="/students/view/<%= student.ID %>" class="btn secondary">Cancel</a>
    </div>
</form>

<%- include('../partials/footer') %>