<%- include('../partials/header') %>

<h2>Add Student to Course</h2>

<% if (error) { %>
    <div class="alert error"><%= error %></div>
<% } %>

<div class="card detail-card">
    <h3>Course: <%= course.Name %></h3>
    <p>Select a student to enroll in this course.</p>
</div>

<form action="/courses/<%= course.ID %>/enroll" method="POST" class="form-card" style="margin-top: 20px;">

    <div class="form-group">
        <label>Select Student:</label>
        <select name="student_id" required style="width: 100%; padding: 8px;">
            <option value="" disabled selected>-- Choose a Student --</option>
            <% if (locals.students) { %>
                <% students.forEach(student => { %>
                    <option value="<%= student.ID %>">
                        <%= student.First_Name %> <%= student.Last_Name %> (<%= student.Email %>)
                    </option>
                <% }) %>
            <% } %>
        </select>
    </div>

    <div class="form-group">
        <label>Grade (Optional):</label>
        <input type="number" name="grade" step="0.5" min="2" max="5" placeholder="e.g. 4.5">
    </div>

    <div class="form-group">
        <label>Enrollment Date:</label>
        <input type="date" name="enrollment_date" value="<%= new Date().toISOString().split('T')[0] %>">
    </div>

    <div class="actions">
        <button type="submit" class="btn">Add Student</button>
        <a href="/courses/view/<%= course.ID %>" class="btn secondary">Cancel</a>
    </div>
</form>

<%- include('../partials/footer') %>